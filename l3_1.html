<html>
<head>
  <title>Vue.js Pet Depot</title>
  <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome-bundled@6.7.2/all.min.css" rel="stylesheet">
</head>
<body>
  <div id="app">
    <header>
      <h1 v-text="sitename"></h1>
      <button v-on:click="toggleCheckout">
        {{ cartItemCount }}
        <span class="fa-solid fa-cart-shopping"></span> Checkout
      </button>
    </header>

    <main>
      <!-- PRODUCT PAGE -->
      <div v-if="showProduct">
        <figure>
          <img v-bind:src="product.image">
        </figure>
        <h2 v-text="product.title"></h2>
        <p v-text="product.description"></p>

        <!-- Add to Cart Button -->
        <button v-on:click="addToCart" v-if="canAddToCart">Add to Cart</button>
        <button disabled v-else>Add to Cart (Sold Out)</button>

        <p>Price: {{ product.price }}</p>
      </div>

      <!-- CHECKOUT PAGE -->
      <div v-else>
        <h2>Checkout</h2>
        <p>
            <strong>First Name:</strong>
            <input v-model="order.firstName"/>
        </p>
        <p>
            <strong>Last Name:</strong>
            <input v-model="order.lastName"/>
        </p>
        <p>
            <strong>Address:</strong>
            <input v-model="order.address"/>
        </p>
        <p>
            <strong>City</strong>
            <input v-model="order.city"/>
        </p>
        <p>
            <strong>State:</strong>
            <select v-model="order.state" class="form-control">
                <option disabled value="">State</option>
                <option v-for="(state, key) in states" 
                    v-bind:value="state">
                    {{ key }} 
                </option>
            </select>
        </p>
        <p>
            <strong>Zip/Postal Code:</strong>
            <input v-model="order.zip"/>
        </p>
        <p><input  type="checkbox" id="gift" value="true" v-model="order.gift" 
            v-bind:true-value="order.sendGift"
            v-bind:false-value="order.dontSendGift"/>
            <label for ="gift">This is a gift</label></p>
        
        <p><input type="radio" id="home" value="Home" v-model="order.method"/>
            <label for="home">Home</label>
            <input type="radio" id="business" value="Business" v-model="order.method"/>
            <label for="business">Business</label></p>
        
        <h2>Order Information</h2>
        <p>First Name: {{ order.firstName }}</p>
        <p>Last Name : {{ order.lastName }}</p>
        <p>Last Name : {{ order.address }}</p>
        <p>Last Name : {{ order.city }}</p>
        <p>Last Name : {{ order.zip }}</p>
        <p>Last Name : {{ order.state }}</p>
        <p>Shipping Method : {{ order.method }}</p>
        <p>Gift Option : {{ order.gift }}</p>
        <button v-on:click="submitFrom">Place Order</button>
        <p v-if="cartItemCount">You have {{ cartItemCount }} items in your cart</p>
        <p v-else>Your cart is empty</p>
        <button v-on:click="toggleCheckout">Continue shopping</button>
      </div>
    </main>
  </div>

  <script type="text/javascript">
    var webstore = new Vue({
      el: '#app',
      data: {
        showProduct: true,
        sitename: "Vue.js Pet Depot",
        order:{
          firstName: "",
          lastName: "",
          address: "",
          city: "",
          state: "",
          zip: "",
          method:'Home',
          gift:false,
          sendGift:'Send as a gift',
          dontSendGift:'Do not send as a gift'
        },
        product: {
          id: 1001,
          title: "Cat Food, 25lb bag",
          description: "A 25 pound      bag of irresistible organic goodness for your cat",
          price: 2000,
          image: "images/productimage.jpg",
          availableInventory: 5
        },
        states: {
          AL: "Alabama",
          AR: "Arkansas",
          CA: "California",
          NV: "Nevada"
        },
        cart: []
      },
      methods: {
        addToCart: function () {
          if (this.canAddToCart) {
            this.cart.push(this.product.id);
          }
        },
        toggleCheckout: function () {
          this.showProduct = !this.showProduct;
        },
        submitFrom: function () {
          alert("Order submitted ");
        }
      },
      computed: {
        cartItemCount() {
          return this.cart.length || "";
        },
        canAddToCart() {
          return this.product.availableInventory > this.cartItemCount;
        }
      }
    });
  </script>
</body>
</html>